> [!info] LINK & TAG
> [TryHackMe | What the Shell?](https://tryhackme.com/room/introtoshells)
> 
> #tag
# 獲得 Shell 後的行動指南

## 1. 核心觀念：尋求「原生連線」

不論 Netcat 或 Socat 多麼強大，它們始終不如原生服務（如 SSH 或 RDP）穩定。我們的首要目標是從不穩定的 Shell 升級為**系統原生帳戶**連線。

---

## 2. Linux 系統的升級路徑

在 Linux 上，我們通常尋找能夠直接登入用戶帳戶的憑證或金鑰。

- **SSH 金鑰 (SSH Keys)**：
    
    - 檢查路徑：`/home/<user>/.ssh/`。
        
    - 目標：尋找 `id_rsa` (私鑰)，將其複製到本地並嘗試 `ssh -i id_rsa user@ip`。
        
- **敏感文件中的憑證**：
    
    - 檢查配置檔案、腳本或歷史紀錄（如 `.bash_history`）。
        
- **利用提權漏洞**：
    
    - **Dirty C0w (髒牛漏洞)**：早期 Linux 核心的提權漏洞。
        
    - **可寫入的敏感文件**：如果 `/etc/passwd` 或 `/etc/shadow` 具備寫入權限，可以直接修改 root 密碼或新增一個 UID 0 的用戶。
        

---

## 3. Windows 系統的升級路徑

Windows 的升級通常依賴於尋找服務憑證或直接新增管理員帳號。

- **註冊表中的密碼 (Registry)**：
    
    - 許多服務（如 VNC）會將密碼以明文存放在註冊表中。
        
- **軟體配置文件**：
    
    - **FileZilla FTP**：密碼可能存放在 XML 檔案中。
        
        - 路徑 1：`C:\Program Files\FileZilla Server\FileZilla Server.xml`
            
        - 路徑 2：`C:\xampp\FileZilla Server\FileZilla Server.xml`
            
- 新增管理員帳戶：
    
    如果你已經獲得了 SYSTEM 或 Administrator 權限，最快的方法是新增自己的帳戶：

    
    ```
    net user <username> <password> /add
    net localgroup administrators <username> /add
    ```
    
    完成後，可嘗試透過 **RDP**、**WinRM** 或 **PsExec** 進行登入。
    

---

## 4. 總結：Shell 類型與原生連線對比

|**特性**|**Reverse / Bind Shell**|**原生連線 (SSH / RDP / WinRM)**|
|---|---|---|
|**交互性**|受限（需手動穩定化）|完整（支持所有捷徑與 GUI）|
|**穩定性**|較低（容易因網路或報錯中斷）|極高|
|**隱蔽性**|較好（有助於逃避監控）|較差（系統日誌會記錄登入事件）|
|**功能**|基本指令執行|檔案傳輸、遠端桌面、全功能管理|

---

## 5. 重要筆記總結

> 關鍵啟發：
> 
> Reverse Shell 是獲取「遠端代碼執行 (RCE)」的手段，但它並非終點。在獲得初步權限後，應立即進行橫向移動或權限提升，轉向使用系統原生的「正常」連線方式，這將使後續的內網滲透與資料收集變得更加容易。
